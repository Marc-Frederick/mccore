#                              -*- Mode: Sh -*- 
# configure.in
# Copyright © 2000-01 Laboratoire de Biologie Informatique et Théorique.
#                     Université de Montréal.
# Author           : Martin Larose
# Created On       : Tue Sep 19 18:21:58 2000
# Last Modified By : Martin Larose
# Last Modified On : Tue Aug 14 12:33:10 2001
# Update Count     : 5
# Status           : Ok.
# 
#  This file is part of mccore.
#  
#  mccore is free software; you can redistribute it and/or
#  modify it under the terms of the GNU Lesser General Public
#  License as published by the Free Software Foundation; either
#  version 2.1 of the License, or (at your option) any later version.
#  
#  mccore is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#  Lesser General Public License for more details.
#  
#  You should have received a copy of the GNU Lesser General Public
#  License along with mccore; if not, write to the Free Software
#  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA


dnl Process this file with autoconf to produce a configure script.


AC_INIT(lib/McCore.h)

PACKAGE=mccore
VERSION=1.1
AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE")
AC_DEFINE_UNQUOTED(VERSION, "$VERSION")

AC_PROG_MAKE_SET

AC_LANG_CPLUSPLUS
AC_C_BIGENDIAN
AC_PROG_CXX
AC_CANONICAL_HOST

AC_PROG_INSTALL
AC_PATH_PROG(AR,ar)
AC_CHECK_FUNCS(strsep)


case "$host" in
*-linux-gnu) CXXFLAGS="-Wall -O2 -g";
             CXXSHFLAGS="-Wall -O2 -g";
	     DEPFLAGS="-MM"
	     LDFLAGS="-static"
	     LINKOPTIONS= ;;
*-sgi-*)     CXXFLAGS="-O2 -g -woff 1681 -ptused";
             CXXSHFLAGS="-O2 -g -woff 1681 -ptused";
	     DEPFLAGS="-M"
	     LDFLAGS=
	     LINKOPTIONS= ;;
*-sun-*)     CXXFLAGS="-Wall -O2 -g";
             CXXSHFLAGS="-Wall -O2 -g -fPIC";
	     DEPFLAGS="-MM"
	     LDFLAGS="-static"
	     LINKOPTIONS= ;;
esac

AC_ARG_WITH(malloc,
[  --with-malloc           replace STL allocator with malloc],
AC_DEFINE(__USE_MALLOC),
)

AC_SUBST(PACKAGE)
AC_SUBST(VERSION)
AC_SUBST(CXXSHFLAGS)
AC_SUBST(DEPFLAGS)
AC_SUBST(LDFLAGS)
AC_SUBST(LINKOPTIONS)

AC_OUTPUT( Makefile docs/Makefile lib/Makefile )
